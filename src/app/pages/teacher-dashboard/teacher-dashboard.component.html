<div class="dashboard-container" *ngIf="!loading && teacher; else loadingTpl">
  
  <!-- Ù‡Ø¯Ø± Ø¨Ø§ Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø± -->
  <div class="dashboard-header">
    <div>
      <h1>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø³ØªØ§Ø¯</h1>
      <p>Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ Ø§Ø³ØªØ§Ø¯ Ú¯Ø±Ø§Ù…ÛŒ</p>
    </div>
    
    <div class="profile-info">
      <div class="user-details">
        <h3>{{ teacher.firstName }} {{ teacher.lastName }}</h3>
        <p>{{ teacher.teacherCode }}</p>
      </div>
      <div class="avatar-circle">
        {{ getTeacherAvatar() }}
      </div>
    </div>
  </div>

  <!-- ğŸ”µ Ø±Ø¯ÛŒÙ Ø§ÙˆÙ„: Ù…Ø±ÙˆØ± Ø§Ù…Ø±ÙˆØ² + ØªÙ‚ÙˆÛŒÙ… -->
  <div class="row-1">
    <!-- Ù…Ø±ÙˆØ± Ø§Ù…Ø±ÙˆØ² -->
    <div class="today-overview-card">
      <div class="card-header">
        <div class="icon-bar"></div>
        <h2>Ù…Ø±ÙˆØ± Ø§Ù…Ø±ÙˆØ²</h2>
      </div>
      
      <ul class="overview-list">
        <li class="overview-item" *ngFor="let item of todayOverview">
          <div class="item-number">{{ item.id }}</div>
          <span>{{ item.title }}</span>
        </li>
      </ul>
    </div>

    <!-- ØªÙ‚ÙˆÛŒÙ… Ø´Ù…Ø³ÛŒ -->
    <div class="calendar-card">
      <div class="calendar-header">
        <div class="calendar-nav">
          <button class="cal-nav-btn" (click)="prevYear()">Â« Ø³Ø§Ù„ Ù‚Ø¨Ù„</button>
          <button class="cal-nav-btn" (click)="prevMonth()">â€¹ Ù…Ø§Ù‡ Ù‚Ø¨Ù„</button>
        </div>
        
        <div class="calendar-title">
          <h3 class="month-name">{{ monthName }}</h3>
          <div class="year-text">{{ currentYear }}</div>
        </div>
        
        <div class="calendar-nav">
          <button class="cal-nav-btn" (click)="nextMonth()">Ù…Ø§Ù‡ Ø¨Ø¹Ø¯ â€º</button>
          <button class="cal-nav-btn" (click)="nextYear()">Ø³Ø§Ù„ Ø¨Ø¹Ø¯ Â»</button>
        </div>
      </div>

      <div class="week-days">
        <div *ngFor="let day of daysOfWeek">{{ day }}</div>
      </div>

      <div class="calendar-grid">
        <div
          *ngFor="let day of calendarGrid"
          class="cal-day"
          [ngClass]="{ 'cal-today': isToday(day), 'cal-empty': day === null }"
        >
          {{ day ?? '' }}
        </div>
      </div>
    </div>
  </div>

  <!-- ğŸ”µ Ø§Ù…ØªØ­Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒØ±Ùˆ ------------------------------------------->
<table class="exams-table-clean">
  <thead>
    <tr>
      <th>Ù†Ø§Ù… Ø§Ù…ØªØ­Ø§Ù†</th>
      <th>ØªØ§Ø±ÛŒØ®</th>
      <th>Ø²Ù…Ø§Ù†</th>
      <th>Ø³Ø§Ù„Ù†</th>
      <th>ÙˆØ¶Ø¹ÛŒØª</th>
    </tr>
  </thead>

  <tbody>
    <tr
      *ngFor="let item of visibleExams; let i = index"
      class="exam-row-clean"
      [ngClass]="[
        getWeekCssClass(item.weekColor),
        isExamPast(item) ? 'exam-past-clean' : ''
      ]"
    >
      <td>
        <div class="exam-card-clean">
          <div class="exam-icon-clean">ğŸ“</div>
          <div class="exam-info-clean">
            <div class="exam-title-clean">{{ item.name }}</div>
            <div *ngIf="item.courseName" class="exam-subtitle-clean">{{ item.courseName }}</div>
          </div>
        </div>
      </td>
      <td>
        <div class="date-card-clean">
          <div class="date-day-clean">{{ getPersianDay(item.date) }}</div>
          <div class="date-number-clean">{{ item.date }}</div>
        </div>
      </td>
      <td>
        <div class="time-container-clean">
          <div class="time-slot-clean">
            <span class="time-icon-clean">â°</span>
            <span class="time-value-clean">{{ item.startTime }} - {{ item.endTime }}</span>
          </div>
        </div>
      </td>
      <td>
        <div class="room-card-clean">
          <span class="room-icon-clean">ğŸ“</span>
          <span class="room-name-clean">{{ item.roomName }}</span>
        </div>
      </td>
      <td>
        <div class="status-container-clean">
          <div 
            class="status-indicator-clean"
            [ngClass]="{
              'status-indicator-active-clean': item.status === 'active',
              'status-indicator-pending-clean': item.status === 'pending',
              'status-indicator-completed-clean': item.status === 'completed'
            }"
          ></div>
          <span 
            class="status-text-clean"
            [ngClass]="{
              'status-text-active-clean': item.status === 'active',
              'status-text-pending-clean': item.status === 'pending',
              'status-text-completed-clean': item.status === 'completed'
            }"
          >
            {{ 
              item.status === 'active' ? 'ÙØ¹Ø§Ù„' :
              item.status === 'pending' ? 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±' :
              item.status === 'completed' ? 'Ù¾Ø§ÛŒØ§Ù† ÛŒØ§ÙØªÙ‡' : 'Ù†Ø§Ù…Ø´Ø®Øµ'
            }}
          </span>
        </div>
      </td>
    </tr>
  </tbody>
</table>  

<!-- ğŸ”µ Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù† ------------------------------------------>
  <div class="courses-card">
    <div class="courses-header">
      <div class="courses-title">
        <div class="icon-bar"></div>
        <h2>Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ù†</h2>
      </div>
      <button class="add-course-btn">+ Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø±Ø³</button>
    </div>

    <div class="courses-grid">
      <div
        *ngFor="let course of myCourses"
        class="course-item"
        (click)="navigateToCourse(course.id)"
      >
        <div class="course-header">
          <div class="course-icon">ğŸ“š</div>
          <span class="course-code">{{ course.courseCode }}</span>
        </div>
        
        <h3 class="course-name">{{ course.courseName }}</h3>
        
        <div class="course-stats">
          <div class="stat-item">
            <span>ğŸ‘¤</span>
            <span>{{ course.studentCount }} Ø¯Ø§Ù†Ø´Ø¬Ùˆ</span>
          </div>
          <div class="stat-item">
            <span>ğŸ“…</span>
            <span>{{ course.examCount }} Ø§Ù…ØªØ­Ø§Ù†</span>
          </div>
          <div class="stat-item">
            <span>ğŸ“–</span>
            <span>{{ course.unitCount }} ÙˆØ§Ø­Ø¯</span>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<!-- Ù„ÙˆØ¯ÛŒÙ†Ú¯ -->
<ng-template #loadingTpl>
  <div class="loading-overlay">
    <div class="loading-content">
      <div class="spinner"></div>
      <p class="loading-text">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª...</p>
    </div>
  </div>
</ng-template>